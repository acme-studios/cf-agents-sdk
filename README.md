# Cloudflare Chat Agent Starter

A minimal, modern chat agent template built on Cloudflare Workers, Durable Objects, Workers AI, and a sleek React + Tailwind UI.
It streams responses, persists chat history in the agent’s storage, and exposes a clean pattern for tool-use — including ready-to-go tools for Weather, Wikipedia, and ISS tracking. 

# Features

- Streamed chat over a lightweight WebSocket client/DO server
- Stateful memory with SQLite (Durable Object sql API)
- Tool calling pattern you can read in one sitting, extend in minutes
- Tasteful UI: minimal chat bubbles, dark/light theme, compact widgets
- Starter tools (Open-Meteo for fetching Weather data, Wikipedia for concise summaries, ISS for live position tracking)

# What’s inside

- Workers AI for text generation (streaming)

- Agents SDK for DO scaffolding + WebSocket lifecycle

- Durable Object for per-session memory + persistence

- Three tools out of the box:

  - getWeather → Open-Meteo 7-day forecast + compact weather strip

  - getWiki → Wikipedia summary + title/thumbnail/link

  - getISS → ISS current position + miniature Leaflet map

- React client with:

  - Markdown rendering for assistant replies

  - Tool cards (progress + result widgets)

  - Dark/light theme toggle (class-based, Tailwind)

  - Reset chat (clears persisted memory + UI)

# Project layout
.
├─ public/
│  ├─ logo-dark-theme.png
│  └─ logo-light-theme.png
├─ src/
│  ├─ agent/wsClient.ts          # websocket client + tool event dispatch
│  ├─ components/chat/
│  │  ├─ ToolCard.tsx            # compact “stepper” progress card
│  │  ├─ WeatherWidget.tsx       # weather strip
│  │  ├─ WikiWidget.tsx          # wiki summary card
│  │  └─ ISSWidget.tsx           # leaflet mini-map + quick facts
│  ├─ App.tsx                    # chat UI, tool wiring, theming
│  ├─ index.css                  # tailwind + theme tokens
│  └─ App.css                    # chat bubble + markdown styles
├─ worker/
│  ├─ index.ts                   # fetch router → DO + static assets
│  ├─ agent.ts                   # Durable Object: chat loop, tools, persistence
│  └─ tools/
│     ├─ getWeather.ts           # Open-Meteo
│     ├─ getWiki.ts              # Wikipedia (CORS-safe)
│     └─ getISS.ts               # ISS position + visibility
├─ wrangler.jsonc                # bindings (AI, DO), migrations
├─ worker-configuration.d.ts     # generated by Wrangler (types)
├─ tsconfig.*.json               # app/worker builds
└─ vite.config.ts

# Prereqs

- Node.js 18+ (20+ recommended)
- npm i -g wrangler (or npx wrangler …)
- A Cloudflare account with Workers enabled

# Quick start (local)

```bash
# install deps
npm i

# run dev (Vite + local Workers runtime)
npm run dev
# http://localhost:5173 URL
```

# Deploy

```bash
# build (type-check + bundle client/worker)
npm run build

# push to Cloudflare
npm run deploy
# (equivalent to: wrangler deploy)
```

# Documentation

- Workers & DO: https://developers.cloudflare.com/workers/

- Durable Objects (SQLite): https://developers.cloudflare.com/workers/learning/using-durable-objects/

- Workers AI: https://developers.cloudflare.com/workers-ai/

- Agents (SDK): https://developers.cloudflare.com/agents/

- Open-Meteo: https://open-meteo.com/

- Wikipedia REST: https://www.mediawiki.org/wiki/API:REST_API

- Leaflet + React-Leaflet: https://react-leaflet.js.org/
  


# License

MIT — do whatever you want, just don’t remove the disclaimers below.

This starter is not an official Cloudflare product. Use responsibly.
External APIs may change behavior or rate limits without notice.


